!function(t){"use strict";function e(t){var e;return"canvas"!==t.tagName?(e=document.createElement("canvas"),e.width=t.naturalWidth,e.height=t.naturalHeight,e.getContext("2d").drawImage(t,0,0)):e=t,e.toDataURL("image/png")}function n(t){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}else t.click()}function r(t,r,i){function o(t){if(setTimeout(function(){a.removeEventListener("click",o,!0)}),i)return i(t)}var a=document.createElement("a");document.body.appendChild(a),a.href=e(t),a.download=r,a.addEventListener("click",o),n(a)}function i(t){return x.test(t)?t.toLowerCase():N.test(t)?(o(t)||t).toLowerCase():M.test(t)?a(t).toLowerCase():t.toLowerCase()}function o(t){return t.replace(O,function(t,e){return e?" "+e:""})}function a(t){return t.replace(k,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}function u(t){return C(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""}).trim()}function s(t){return H(t).replace(/\s(\w)/g,function(t,e){return e.toUpperCase()})}function l(t,e,n){var r=U[e];if("undefined"==typeof r&&(r=f(e)),r){if(void 0===n)return t.style[r];t.style[r]=R(r,n)}}function c(t,e){for(var n in e)e.hasOwnProperty(n)&&l(t,n,e[n])}function f(t){var e=F(t),n=z(e);return U[e]=U[t]=U[n]=n,n}function h(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:c(arguments[0],arguments[1]):l(arguments[0],arguments[1],arguments[2])}function p(t){this.listeners={},this.__context=t||this}function d(t){if("string"==typeof t)try{return document.querySelector(t)}catch(t){throw t}else if(Z(t))return t}function m(t){return!("object"!=typeof t||!t.tagName||"input"!==t.tagName.toLowerCase())}function y(t,e){return v(t),t.parentNode.insertBefore(e,t),t}function v(t){W(t,{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute","z-index":-1})}function b(t,e){"string"==typeof e?t.innerHTML=e:(t.innerHTML="",t.appendChild(e))}function g(t,e){return new $(t,e)}function w(t,e){return new J(t,e)}var L=null,A=["Webkit","Moz","O","ms"],E=function(t){L||(L=document.createElement("div"));var e=L.style;if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=A.length;r>=0;r--){var i=A[r]+n;if(i in e)return i}return!1},T=i,x=/\s/,N=/(_|-|\.|:)/,M=/([a-z][A-Z]|[A-Z][a-z])/,O=/[\W_]+(.|$)/g,k=/(.)([A-Z]+)/g,C=T,j=u,H=j,S=s,_={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},I=function(t,e){return"number"!=typeof e||_[t]?e:e+"px"},z=E,F=S,U={float:"cssFloat"},R=I,W=h,D=h,P=function(t,e){return Array.isArray(e)?e.reduce(function(e,n){return e[n]=l(t,n||""),e},{}):l(t,e||"")};W.set=D,W.get=P,p.prototype={constructor:p,on:function(t,e){return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this},one:function(t,e){function n(){return e.apply(this,arguments),this.off(t,n),this}return this.on(t,n)},emit:function(t){var e=this;if("undefined"==typeof this.listeners[t]||!this.listeners[t].length)return this;var n=Array.prototype.slice.call(arguments,1),r=this.listeners[t].length;do e.listeners[t][--r].apply(e.__context,n);while(r);return this},off:function(t,e){return void 0!==this.listeners[t]&&this.listeners[t].length?(this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}),this):this},dispose:function(){var t=this;for(var e in this)t[e]=null}};var q=p,G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},Z=function(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":G(t))&&1===t.nodeType&&"object"===G(t.style)&&"object"===G(t.ownerDocument)},B=function(){var t=function(t){return"function"==typeof t},e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},n=Math.pow(2,53)-1,r=function(t){var r=e(t);return Math.min(Math.max(r,0),n)},i=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(typeof t)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},o=function(e,n){if(null!=e&&null!=n){var r=e[n];if(null==r)return;if(!t(r))throw new TypeError(r+" is not a function");return r}},a=function(t){var e=t.next(),n=Boolean(e.done);return!n&&e};return function(e){var n,u=this,s=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof s){if(!t(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var l,c,f=o(e,i(e));if(void 0!==f){l=t(u)?Object(new u):[];var h=f.call(e);if(null==h)throw new TypeError("Array.from requires an array-like or iterable object");c=0;for(var p,d;;){if(p=a(h),!p)return l.length=c,l;d=p.value,s?l[c]=s.call(n,d,c):l[c]=d,c++}}else{var m=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=r(m.length);l=t(u)?Object(new u(y)):new Array(y),c=0;for(var v;c<y;)v=m[c],s?l[c]=s.call(n,v,c):l[c]=v,c++;l.length=y}return l}}(),$=("function"==typeof Array.from?Array.from:B,Array.isArray,Object.prototype.toString,function(t){function e(e,n){function r(t){function n(t){var e=new Image,n=window.URL||window.webkitURL,a=n.createObjectURL(t);e.src=a,i.push(a),o.push(e),e.onload=function(){--r||(s("load",o),setTimeout(function(){i.forEach(function(t){n.revokeObjectURL(t)})}))}}s("loading");var r=e.files.length,i=[],o=[];[].slice.call(e.files).forEach(n)}var i=this;if(void 0===n&&(n={}),t.call(this),e=d(e),!m(e))throw new TypeError(e+" is not an input element.");var o=this.label=document.createElement("label");if(this.input=e,n.id)this.id=n.id;else if(e.hasAttribute("id")){var a=e.getAttribute("id");a.length?this.id=e.getAttribute("id"):this.id="dom-image-file-opener"}if("boolean"==typeof n.multiple)this.multiple=n.multiple;else if(e.hasAttribute("multiple")){var u=e.getAttribute("multiple");u.length&&(this.multiple=u)}"string"==typeof n.className&&(this.className=n.className),e.setAttribute("type","file"),W(o,{cursor:"pointer"}),n.innerHTML?this.innerHTML=n.innerHTML:this.innerHTML.length||(this.innerHTML="Open Image"),y(e,o);var s=function(t,e){return i.emit(t,e)};e.addEventListener("change",r,!1),this.destroy=function(){return e.removeEventListener("change",r,!1),o.parentNode.removeChild(o),e}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={innerHTML:{},id:{},parent:{},className:{},multiple:{}};return e.prototype.html=function(t){return t?void b(this.label,t):this.label.innerHTML},n.innerHTML.get=function(){return this.label.innerHTML},n.innerHTML.set=function(t){this.label.innerHTML=t},n.id.set=function(t){this.input.setAttribute("id",t),this.label.setAttribute("for",t)},n.id.get=function(){return this.input.getAttribute("id")},n.parent.get=function(){return this.input.parentNode},n.className.get=function(){return this.label.className},n.className.set=function(t){this.label.className=t},n.multiple.set=function(t){this.input.setAttribute("multiple",t)},Object.defineProperties(e.prototype,n),e}(q)),J=function(t){function n(n,r){function i(t){t.targetTouches&&t.preventDefault(),s("save",l)}var o=this;if(t.call(this),n=d(n),!m(n))throw new TypeError(n+" is not an input element.");r=r||{};this.input=n;var a=this.link=document.createElement("a"),u=document.createElement("span");u.appendChild(a),a.href="#",this.html(r.html||"Save File"),y(n,u),this.name=r.name||"image.png",W(a,{"text-decoration":"none",color:"black"});var s=function(t,e){return o.emit(t,e)};a.addEventListener("mousedown",i,!1),a.addEventListener("touchstart",i,!1);var l={saveAs:function(t,r){t&&(a.href=e(t),a.download=r,n.value=r)}};this.destroy=function(){return a.removeEventListener("click",onClick,!1),u.parentNode.removeChild(u),n}}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={className:{}};return n.prototype.html=function(t){return t?void b(this.link,t):this.link.innerHTML},r.className.get=function(){return this.container.className},r.className.set=function(t){this.container.className=t},Object.defineProperties(n.prototype,r),n}(q);t.imageOpener=g,t.imageSaver=w,t.saveImage=r}(this.domImageFile=this.domImageFile||{});